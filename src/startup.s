;-----------------------------------------------------------------------------
; Apple II Startup Code for Mockingboard Player
; Creates a binary that can be CALLed from BASIC
;-----------------------------------------------------------------------------

.import main

;-----------------------------------------------------------------------------
; Header segment - Load address for Apple II DOS/ProDOS
;-----------------------------------------------------------------------------
.segment "HEADER"
        .word   $9000           ; Load address

;-----------------------------------------------------------------------------
; System addresses
;-----------------------------------------------------------------------------
DOSWARM = $03D0                 ; DOS/ProDOS warm start - returns to BASIC ]

;-----------------------------------------------------------------------------
; Startup segment
;-----------------------------------------------------------------------------
.segment "STARTUP"

;-----------------------------------------------------------------------------
; Entry point - called via CALL 36864 from BASIC
;-----------------------------------------------------------------------------
start:
        jsr     main            ; Run player
        jmp     DOSWARM         ; Return to BASIC ] prompt
